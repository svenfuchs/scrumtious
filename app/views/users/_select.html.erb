<% unless (users = User.all).empty? %>
  <form action="<%= login_path %>" method="post">
    <%= hidden_field_tag :return_to, request.request_uri %>
    <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
    <%= collection_select :current_user, :id, users, :id, :first_name, {:prompt => 'Current user'}, :onchange => "this.form.submit()" %>
  </form>
<% end %>