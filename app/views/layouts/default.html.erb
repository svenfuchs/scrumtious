<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title><%= controller.controller_name.titleize %>: <%= controller.action_name %></title>
  <%= stylesheet_link_tag 'scaffold', 'scrummy', :cache => true %>
  <%= javascript_include_tag 'jquery-1.2.6.min', 'jquery.jeditable.mini', :cache => true %>

  <style>
  .td-edit {
    width: 20px;
    position: absolute;
  }
  .td-edit input {
    width: 100% !important;
    border: 0px;
    font-size: 13px;
    margin-left: -8px;
    padding-top: 1px;
    padding-left: 7px;
  }
  </style>

  <script>
    var authenticity_token = '<%= form_authenticity_token %>';

    save_edit = function(value, settings) {
      var tokens = this.id.split('-');
      var html = '<form action="/tickets/' + tokens[2] + '" method="post">' +
        '<input type="hidden" name="_method" value="put">' +
        '<input type="hidden" name="ticket[' + tokens[1] + ']" value="' + value + '">' +
        '<input type="hidden" name="authenticity_token" value="' + authenticity_token + '">' +
        '<input type="hidden" name="return_to" value="' + location.href + '">' +
        '</form>'
      var form = $(html).appendTo("body");
      form.submit();
      return value;
    }

    $(document).ready(function () {
      $("#flash").animate({opacity: 1.0}, 3000).fadeOut(1000);
      $(".edit").editable(save_edit, { cssclass: "td-edit" });
    });
  </script>

</head>
<body>
<div id="header">
  <%= render :partial => 'users/select' %>
</div>
<%= render :partial => 'layouts/flash', :locals => {:flash => flash} %>

<div id="sidebar">
  <%= render :partial => 'activities/list', :locals => {:activities => activities} %>
</div>

<div id="main">
  <%= yield  %>
</div>



</body>
</html>
